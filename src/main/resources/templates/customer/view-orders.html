<!DOCTYPE html>
<html lang="en"
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec='http://www.thymeleaf.org/extras/spring-security'>

<head th:replace="fragments/commons::head"></head>

<body>

<header th:replace="fragments/commons::header"></header>

<main>
    <div class="container-fluid" id="displayOrders">

        <!--        the search will always be visible, so it is ok to remain here and not to be generated by jQuery-->
        <form id="searchOrdersForm" class="form-inline">
            <input class="form-control mr-sm-2" type="text" placeholder="Search by order number" aria-label="Search"
                   name="search">
            <button class="btn btn-link bg-info text-white" type="submit">
                <span sec:authorize="!hasRole('ADMIN') && !hasRole('EMPLOYEE_SALES')">Search my orders</span>
                <span sec:authorize="hasRole('ADMIN') || hasRole('EMPLOYEE_SALES')">Search all orders</span>
            </button>
        </form>

<!--        inline script demo-->
        <h2 class="text-center text-white mt-5 greybg" id="titleOrders">
            <script>
                let result = [[${#authorization.expression('!hasRole("EMPLOYEE_SALES") && !hasRole("ADMIN")')}]];

                if (result == true) {
                    document.getElementById('titleOrders').textContent = '.......My Orders.......';
                } else {
                    document.getElementById('titleOrders').textContent = '......All orders.......';
                }
            </script>
<!--            <span sec:authorize="!hasRole('ADMIN') && !hasRole('EMPLOYEE_SALES')">.......My Orders.......</span>-->
<!--            <span sec:authorize="hasRole('ADMIN') || hasRole('EMPLOYEE_SALES')">......All orders.......</span>-->
        </h2>


        <!--        <th:block th:if="${orders.size() == 0}">-->
        <!--            <h4 class="text-center text-white mt-5 greybg">.....No orders available.....</h4>-->
        <!--        </th:block>-->

        <!--        <th:block th:if="${orders.size() != 0}">-->
        <!--            <div>-->
        <!--                <div class="container" th:each="o : ${orders}" th:object="${o}">-->
        <!--                    <div class="float-left">-->
        <!--                        <div class="row justify-content-md-center" style="min-height: 38px">-->
        <!--                            <div class="col-md-auto text-dark bg-white" style="min-height: 38px"><span-->
        <!--                                    th:text="'Client username: ' + *{username}">Client username:</span></div>-->
        <!--                            <div class="col-md-auto text-dark bg-white" style="min-height: 38px"><span-->
        <!--                                    th:text="'Order number: ' + *{orderNumber}">Order number:</span>-->
        <!--                            </div>-->
        <!--                            <div class="col-md-auto text-dark bg-white" style="min-height: 38px"><span-->
        <!--                                    th:text="'Total items: ' + *{totalItemsInOrder}">Total items:</span>-->
        <!--                            </div>-->
        <!--                            <div class="col-md-auto text-dark bg-white" style="min-height: 38px"><span-->
        <!--                                    th:text="'Total value: '+ *{totalValue} + 'BGN'">Total value:</span>-->
        <!--                            </div>-->
        <!--                            <div class="w-100"></div>-->
        <!--                            <div class="col-md-auto text-dark bg-white" style="min-height: 38px"><span-->
        <!--                                    th:text="'Created at: ' + *{createdAt}">Order created at:</span>-->
        <!--                            </div>-->
        <!--                            <div class="col-md-auto text-dark bg-white" style="min-height: 38px"><span-->
        <!--                                    th:text="'Order status: '+ *{orderStatus}">Order status:</span>-->
        <!--                            </div>-->
        <!--                            <a class="col-md-auto btn btn-info"-->
        <!--                               th:href="@{/users/vieworders/{orderNumber}/details (orderNumber=*{orderNumber})}">Details</a>-->

        <!--                            <a sec:authorize="hasRole('EMPLOYEE_SALES')" class="col-md-auto btn btn-info" th:href="@{/users/changeorderstatus/{orderNumber} (orderNumber=*{orderNumber})}">Change status</a>-->
        <!--                        </div>-->
        <!--                    </div>-->
        <!--                    <br>-->
        <!--                </div>-->
        <!--                <br>-->
        <!--            </div>-->
        <!--        </th:block>-->
    </div>
</main>


<footer th:replace="fragments/commons::footer"></footer>

<script th:inline="javascript" src="/js/viewAndSearchOrders.js" type="text/javascript"> </script>

</body>
</html>